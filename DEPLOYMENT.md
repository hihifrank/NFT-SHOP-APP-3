# éƒ¨ç½²æŒ‡å— / Deployment Guide

## ğŸš€ é¡¹ç›®å·²æˆåŠŸä¸Šä¼ åˆ°GitHub

é¡¹ç›®åœ°å€ï¼šhttps://github.com/hihifrank/NFT-SHOP-APP-3

## ğŸ“‹ éƒ¨ç½²æ¸…å•

### âœ… å·²å®Œæˆçš„ç³»ç»Ÿé›†æˆå’Œéƒ¨ç½²åŠŸèƒ½

#### 9.1 CI/CDç®¡é“è®¾ç½®
- **GitHub Actionså·¥ä½œæµ** - è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²
- **Dockeré…ç½®** - å¤šé˜¶æ®µæ„å»ºï¼Œç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
- **Kuberneteséƒ¨ç½²** - å®Œæ•´çš„K8sæ¸…å•æ–‡ä»¶
- **éƒ¨ç½²è„šæœ¬** - è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œå›æ»šè„šæœ¬

#### 9.2 ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- **æ—¥å¿—æœåŠ¡** - ç»“æ„åŒ–JSONæ ¼å¼æ—¥å¿—
- **ç›‘æ§æœåŠ¡** - åº”ç”¨æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†
- **å‘Šè­¦ç³»ç»Ÿ** - æ™ºèƒ½å‘Šè­¦è§„åˆ™å’Œå¤–éƒ¨é›†æˆ
- **å¥åº·æ£€æŸ¥** - å­˜æ´»æ€§å’Œå°±ç»ªæ€§æ¢é’ˆ
- **Prometheusé›†æˆ** - æŒ‡æ ‡å¯¼å‡ºå’ŒGrafanaä»ªè¡¨æ¿

#### 9.3 ç«¯åˆ°ç«¯æµ‹è¯•
- **å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•** - ä»æ³¨å†Œåˆ°ä¼˜æƒ åˆ¸ä½¿ç”¨
- **è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•** - ç§»åŠ¨åº”ç”¨ã€Webæµè§ˆå™¨å’ŒAPI
- **æ€§èƒ½å’Œè´Ÿè½½æµ‹è¯•** - å“åº”æ—¶é—´åŸºå‡†å’Œå‹åŠ›æµ‹è¯•
- **è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå™¨** - ç»¼åˆæµ‹è¯•æŠ¥å‘Š

## ğŸ› ï¸ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/hihifrank/NFT-SHOP-APP-3.git
cd NFT-SHOP-APP-3

# å®‰è£…ä¾èµ–
npm install
cd mobile && npm install && cd ..

# ç¯å¢ƒé…ç½®
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“å’ŒåŒºå—é“¾è¿æ¥

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 2. Dockeréƒ¨ç½²

```bash
# æ„å»ºDockeré•œåƒ
npm run docker:build

# ä½¿ç”¨Docker Composeå¯åŠ¨å®Œæ•´ç¯å¢ƒ
docker-compose up -d

# å¯åŠ¨ç›‘æ§æ ˆ
cd monitoring
docker-compose -f docker-compose.monitoring.yml up -d
```

### 3. Kuberneteséƒ¨ç½²

```bash
# åº”ç”¨æ‰€æœ‰Kubernetesèµ„æº
kubectl apply -f k8s/

# éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
npm run deploy:staging

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
npm run deploy:production
```

## ğŸ“Š ç›‘æ§å’Œè§‚å¯Ÿ

### è®¿é—®ç›‘æ§ç•Œé¢

- **åº”ç”¨å¥åº·æ£€æŸ¥**: http://localhost:3000/health
- **APIæ–‡æ¡£**: http://localhost:3000/api/docs
- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3001 (admin/admin123)
- **AlertManager**: http://localhost:9093

### å…³é”®æŒ‡æ ‡

- APIå“åº”æ—¶é—´å’Œé”™è¯¯ç‡
- æ•°æ®åº“æ€§èƒ½
- åŒºå—é“¾äº¤æ˜“çŠ¶æ€
- ç”¨æˆ·å‚ä¸åº¦æŒ‡æ ‡
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ§ª æµ‹è¯•æ‰§è¡Œ

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
npm run test:unit

# é›†æˆæµ‹è¯•
npm run test:integration

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æ€§èƒ½æµ‹è¯•
npm run test:e2e:performance

# å®‰å…¨æµ‹è¯•
npm run test:security
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“± ç§»åŠ¨åº”ç”¨éƒ¨ç½²

### iOSéƒ¨ç½²

```bash
cd mobile

# å®‰è£…iOSä¾èµ–
npx pod-install ios

# è¿è¡ŒiOSåº”ç”¨
npm run ios

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:ios
```

### Androidéƒ¨ç½²

```bash
cd mobile

# è¿è¡ŒAndroidåº”ç”¨
npm run android

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:android
```

## ğŸ” å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ¸…å•

- [ ] é…ç½®HTTPSè¯ä¹¦
- [ ] è®¾ç½®é˜²ç«å¢™è§„åˆ™
- [ ] é…ç½®æ•°æ®åº“è®¿é—®æ§åˆ¶
- [ ] è®¾ç½®APIé€Ÿç‡é™åˆ¶
- [ ] é…ç½®ç›‘æ§å‘Šè­¦
- [ ] å¤‡ä»½ç­–ç•¥è®¾ç½®

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# ç”Ÿäº§ç¯å¢ƒå¿…éœ€çš„ç¯å¢ƒå˜é‡
NODE_ENV=production
DATABASE_URL=postgresql://...
REDIS_URL=redis://...
JWT_SECRET=your-jwt-secret
BLOCKCHAIN_PRIVATE_KEY=0x...
IPFS_PROJECT_ID=your-ipfs-id
IPFS_PROJECT_SECRET=your-ipfs-secret
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥é”™è¯¯**
   ```bash
   # æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
   pg_isready -h localhost -p 5432
   ```

2. **ç«¯å£å†²çª**
   ```bash
   # æ£€æŸ¥ç«¯å£ä½¿ç”¨æƒ…å†µ
   netstat -tulpn | grep :3000
   ```

3. **å†…å­˜ä¸è¶³**
   ```bash
   # å¢åŠ Node.jså†…å­˜é™åˆ¶
   export NODE_OPTIONS="--max-old-space-size=4096"
   ```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker logs hk-retail-nft-api

# æŸ¥çœ‹Kubernetes Podæ—¥å¿—
kubectl logs -f deployment/hk-retail-nft-api -n hk-retail-nft-platform
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

- ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢æ€§èƒ½è°ƒä¼˜
- è¿æ¥æ± é…ç½®

### ç¼“å­˜ç­–ç•¥

- Redisç¼“å­˜é…ç½®
- APIå“åº”ç¼“å­˜
- é™æ€èµ„æºCDN

### è´Ÿè½½å‡è¡¡

- Kubernetes HPAé…ç½®
- æ•°æ®åº“è¯»å†™åˆ†ç¦»
- å¾®æœåŠ¡æ¶æ„

## ğŸ”„ CI/CDæµç¨‹

### GitHub Actionså·¥ä½œæµ

1. **ä»£ç æ¨é€è§¦å‘**
2. **è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ**
3. **å®‰å…¨æ‰«æ**
4. **Dockeré•œåƒæ„å»º**
5. **éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ**
6. **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**ï¼ˆéœ€è¦æ‰‹åŠ¨æ‰¹å‡†ï¼‰

### éƒ¨ç½²ç­–ç•¥

- **è“ç»¿éƒ¨ç½²**: é›¶åœæœºæ—¶é—´éƒ¨ç½²
- **æ»šåŠ¨æ›´æ–°**: é€æ­¥æ›¿æ¢å®ä¾‹
- **é‡‘ä¸é›€å‘å¸ƒ**: å°æµé‡æµ‹è¯•

## ğŸ“ æ”¯æŒå’Œç»´æŠ¤

### ç›‘æ§å‘Šè­¦

- ç³»ç»Ÿæ€§èƒ½å‘Šè­¦
- é”™è¯¯ç‡å‘Šè­¦
- å®‰å…¨äº‹ä»¶å‘Šè­¦
- ä¸šåŠ¡æŒ‡æ ‡å‘Šè­¦

### å¤‡ä»½ç­–ç•¥

- æ•°æ®åº“å®šæœŸå¤‡ä»½
- é…ç½®æ–‡ä»¶å¤‡ä»½
- ä»£ç ç‰ˆæœ¬æ§åˆ¶

### æ›´æ–°æµç¨‹

1. å¼€å‘ç¯å¢ƒæµ‹è¯•
2. æµ‹è¯•ç¯å¢ƒéªŒè¯
3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
4. ç›‘æ§å’Œå›æ»šå‡†å¤‡

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] è®¾ç½®ç”Ÿäº§ç¯å¢ƒç›‘æ§
- [ ] é…ç½®è‡ªåŠ¨åŒ–å¤‡ä»½
- [ ] å®æ–½å®‰å…¨å®¡è®¡
- [ ] æ€§èƒ½ä¼˜åŒ–è°ƒæ•´
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†

---

**é¡¹ç›®çŠ¶æ€**: âœ… ç³»ç»Ÿé›†æˆå’Œéƒ¨ç½²å®Œæˆ
**GitHubåœ°å€**: https://github.com/hihifrank/NFT-SHOP-APP-3
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ3æ—¥